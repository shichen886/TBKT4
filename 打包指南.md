# 知识追踪系统 - 桌面应用打包指南

## 方案一：使用PyInstaller打包成EXE文件（推荐）

### 准备工作

1. **安装PyInstaller**
```bash
pip install pyinstaller
```

2. **确保所有依赖已安装**
```bash
pip install -r requirements.txt
```

### 打包步骤

1. **使用配置文件打包**
```bash
pyinstaller knowledge_tracing.spec
```

2. **或者使用命令行直接打包**
```bash
pyinstaller --onefile --name "知识追踪系统" --add-data "app.py;." --add-data "model_sakt.py;." --add-data "model_tsakt.py;." --add-data "utils.py;." --add-data "data;data" --add-data "save;save" launcher.py
```

3. **打包完成后**
- 生成的EXE文件位于 `dist` 文件夹中
- 文件名：`知识追踪系统.exe`
- 可以直接双击运行，无需安装Python环境

### 注意事项

1. **文件大小**：打包后的EXE文件可能较大（约200-500MB），这是正常的
2. **首次运行**：首次启动可能需要几秒钟时间
3. **数据文件**：确保 `data` 和 `save` 文件夹与EXE文件在同一目录下
4. **OCR功能**：如果使用拍照上传功能，需要单独安装Tesseract OCR引擎

## 方案二：创建便携版Python环境

### 准备工作

1. **下载Python嵌入式版本**
- 访问 https://www.python.org/downloads/windows/
- 下载"Windows embeddable package (64-bit)"

2. **创建便携环境**
```bash
# 创建文件夹
mkdir 知识追踪系统便携版
cd 知识追踪系统便携版

# 解压Python嵌入式版本到当前目录

# 安装依赖
python -m pip install --target=. -r requirements.txt
```

3. **复制项目文件**
- 将所有 `.py` 文件复制到便携版目录
- 复制 `data` 和 `save` 文件夹
- 创建启动脚本 `启动系统.bat`：
```batch
@echo off
cd /d "%~dp0"
python launcher.py
pause
```

### 使用方法
- 双击 `启动系统.bat` 即可运行
- 可以将整个文件夹复制到任何电脑上使用

## 方案三：使用虚拟机或容器

### 使用Docker（推荐）

1. **创建Dockerfile**
```dockerfile
FROM python:3.10-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE 8501

CMD ["streamlit", "run", "app.py", "--browser.gatherUsageStats", "false"]
```

2. **构建镜像**
```bash
docker build -t knowledge-tracing-system .
```

3. **运行容器**
```bash
docker run -p 8501:8501 knowledge-tracing-system
```

### 使用虚拟机

1. **安装VirtualBox或VMware**
2. **创建新的虚拟机**
3. **在虚拟机中安装Python和依赖**
4. **复制项目文件到虚拟机**
5. **在虚拟机中运行系统**

## 方案四：使用Web服务器部署

### 本地Web服务器

1. **使用Flask包装Streamlit**
```python
# app_server.py
from flask import Flask
import subprocess

app = Flask(__name__)

@app.route('/')
def home():
    return "知识追踪系统正在运行，请访问 http://localhost:8501"

if __name__ == '__main__':
    subprocess.Popen(['streamlit', 'run', 'app.py'])
    app.run(host='0.0.0.0', port=5000)
```

2. **打包为服务**
- 使用pywin32创建Windows服务
- 使用systemd创建Linux服务

## 推荐方案总结

| 方案 | 优点 | 缺点 | 适用场景 |
|------|------|------|----------|
| PyInstaller打包 | 单文件，易于分发 | 文件大，首次启动慢 | 个人使用，快速分发 |
| 便携Python环境 | 灵活，易于修改 | 需要Python解释器 | 技术用户，需要定制 |
| Docker容器 | 跨平台，环境一致 | 需要Docker环境 | 开发和部署 |
| Web服务器 | 多用户访问 | 需要网络环境 | 企业级应用 |

## 快速开始（推荐）

如果您希望快速获得一个可以在任何电脑上运行的版本，推荐使用**方案一：PyInstaller打包**：

1. 安装PyInstaller：`pip install pyinstaller`
2. 运行打包命令：`pyinstaller knowledge_tracing.spec`
3. 在 `dist` 文件夹中找到 `知识追踪系统.exe`
4. 复制到任何电脑上双击运行即可

## 技术支持

如遇到问题，请检查：
1. Python版本是否为3.8或更高
2. 所有依赖是否正确安装
3. 数据文件是否完整
4. 是否有足够的磁盘空间

## 许可证

本系统仅供学习和研究使用。